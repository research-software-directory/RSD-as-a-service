// SPDX-FileCopyrightText: 2022 - 2023 Dusan Mijatovic (dv4all)
// SPDX-FileCopyrightText: 2022 - 2023 dv4all
// SPDX-FileCopyrightText: 2023 - 2024 Dusan Mijatovic (Netherlands eScience Center)
// SPDX-FileCopyrightText: 2023 - 2024 Netherlands eScience Center
//
// SPDX-License-Identifier: Apache-2.0

import Accordion from '@mui/material/Accordion';
import AccordionSummary from '@mui/material/AccordionSummary';
import AccordionDetails from '@mui/material/AccordionDetails';
import ExpandMoreIcon from '@mui/icons-material/ExpandMore';
import Badge from '@mui/material/Badge';

export type AccordionProps = {
	title: string;
	badgeContent: number | null;
	children: any;
	maxBadgeCount?: number;
};

export default function AccordionForDarkTheme({
	title,
	badgeContent,
	maxBadgeCount = 9999,
	children,
}: AccordionProps) {
	return (
		<Accordion
			data-testid="mentions-section-for-type"
			sx={{
				boxShadow: 0,
				borderTop: '1px solid',
				borderColor: 'divider',
				backgroundColor: 'secondary.light',
				// remove line above the accordion
				'&:before': {
					height: '0px',
				},
				'&:last-child': {
					borderBottom: '1px solid',
					borderColor: 'divider',
				},
			}}
		>
			<AccordionSummary
				expandIcon={<ExpandMoreIcon />}
				// aria-controls={`panel1-content-${type}`}
				// id={`panel1-header-${type}`}
				sx={{
					position: 'sticky',
					top: 0,
					backgroundColor: 'secondary.main',
					padding: '0rem',
					'&:hover': {
						opacity: 0.95,
					},
				}}
			>
				<Badge
					badgeContent={badgeContent}
					max={maxBadgeCount}
					color="secondary"
					sx={{
						'& .MuiBadge-badge': {
							right: '-1rem',
							top: '0.25rem',
							border: '1px solid',
							borderColor: 'secondary.contrastText',
							color: 'secondary.contrastText',
							fontWeight: 500,
						},
					}}
				>
					<div className="text-xl">{title}</div>
				</Badge>
			</AccordionSummary>
			<AccordionDetails
				sx={{
					// set max height to avoid large shifts
					maxHeight: '32rem',
					//avoid resizing when scrollbar appears
					overflow: 'overlay',
					padding: '0rem 0rem',
				}}
			>
				{children}
			</AccordionDetails>
		</Accordion>
	);
}
